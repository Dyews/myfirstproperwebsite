<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rapid Iteration â€” Hello World</title>
    <meta name="description" content="Rapid Iteration with fast feedback" />
    <style>
      :root {
        --bg: #0b0f14;
        --text: #e6f1ff;
        --muted: #9bb3c7;
        --primary: #6ae3ff;
        --primary-2: #9dff6a;
        --danger: #ff6a6a;
        --btn-bg: #121924;
        --btn-hover: #1a2433;
      }

      html, body {
        height: 100%;
      }

      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
          Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji",
          "Segoe UI Emoji";
        background: radial-gradient(1200px 800px at 70% 10%, #122032 0%, var(--bg) 60%);
        color: var(--text);
        display: grid;
        place-items: center;
        overflow-x: hidden;
      }

      .hero {
        text-align: center;
        padding: 64px 20px;
        max-width: 900px;
      }

      .title {
        font-size: clamp(40px, 8vw, 84px);
        line-height: 1.05;
        letter-spacing: -0.02em;
        margin: 0 0 12px 0;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-2) 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .subtitle {
        font-size: clamp(16px, 2.5vw, 22px);
        color: var(--muted);
        margin: 0 0 32px 0;
      }

      .tagline {
        font-size: clamp(14px, 2vw, 18px);
        color: var(--muted);
        margin: 0 0 28px 0;
        opacity: 0.9;
      }

      .buttons {
        display: inline-grid;
        grid-auto-flow: column;
        gap: 14px;
      }

      button {
        appearance: none;
        border: 1px solid #203044;
        background: var(--btn-bg);
        color: var(--text);
        padding: 12px 20px;
        border-radius: 12px;
        font-size: 16px;
        cursor: pointer;
        transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
      }

      button:hover {
        background: var(--btn-hover);
        transform: translateY(-1px);
        border-color: #2b435e;
      }

      button:active {
        transform: translateY(0);
      }

      .agree {
        border-color: #2a4659;
      }

      .disagree {
        border-color: #4a2a2a;
      }

      .footnote {
        margin-top: 18px;
        color: #7a8da3;
        font-size: 13px;
      }

      /* Confetti canvas overlays content during celebration */
      .confetti-layer {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 50;
      }

      /* Anti-fanfare: subtle grayscale flash and shake */
      .nope {
        filter: grayscale(0.9) brightness(0.9);
        animation: shake 500ms ease-in-out;
      }

      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20% { transform: translateX(-6px); }
        40% { transform: translateX(6px); }
        60% { transform: translateX(-4px); }
        80% { transform: translateX(4px); }
      }

      /* Rain overlay for disagree */
      .rain-layer {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 60;
      }

      .drop {
        position: absolute;
        top: -20px;
        font-size: 18px;
        opacity: 0.9;
        animation: fall linear forwards;
      }

      @keyframes fall {
        to {
          transform: translateY(110vh) rotate(10deg);
          opacity: 0.4;
        }
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
  </head>
  <body>
    <main class="hero" aria-labelledby="page-title">
      <h1 id="page-title" class="title">Rapid Iteration</h1>
      <p class="subtitle">with fast feedback</p>
      <p class="tagline">Is key to success</p>
      <div class="buttons" role="group" aria-label="Agreement options">
        <button class="agree" id="agreeBtn" aria-label="I agree to celebrate">I agree</button>
        <button class="disagree" id="disagreeBtn" aria-label="I disagree to decline">I disagree</button>
      </div>
      <div class="footnote" aria-live="polite" id="status"></div>
    </main>

    <canvas class="confetti-layer" id="confetti" aria-hidden="true"></canvas>
    <div class="rain-layer" id="rain" aria-hidden="true"></div>

    <script>
      (function () {
        const agreeBtn = document.getElementById('agreeBtn');
        const disagreeBtn = document.getElementById('disagreeBtn');
        const confettiCanvas = document.getElementById('confetti');
        const rainLayer = document.getElementById('rain');
        const statusEl = document.getElementById('status');

        // Resize helpers
        function fitCanvasToWindow(canvas) {
          const dpr = Math.max(window.devicePixelRatio || 1, 1);
          const { innerWidth: w, innerHeight: h } = window;
          canvas.width = Math.floor(w * dpr);
          canvas.height = Math.floor(h * dpr);
          canvas.style.width = w + 'px';
          canvas.style.height = h + 'px';
          const ctx = canvas.getContext('2d');
          ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
          return ctx;
        }

        // Fireworks implementation (colorful bursts, ~2s)
        function launchFireworks(durationMs = 2000) {
          const ctx = fitCanvasToWindow(confettiCanvas);
          let rect = confettiCanvas.getBoundingClientRect();
          let width = rect.width;
          let height = rect.height;
          if (width === 0 || height === 0) {
            // Ensure canvas is properly sized
            rect = confettiCanvas.getBoundingClientRect();
            width = rect.width;
            height = rect.height;
          }

          const colors = ['#ff6ab2', '#6ae3ff', '#ffd36a', '#9dff6a', '#a18bff', '#ff956a'];
          const gravity = 0.045;
          const airDrag = 0.0025;
          const rocketInterval = 50; // ms, much faster spawning for denser show

          const rockets = [];
          const particles = [];

          function spawnRocket() {
            const x = 60 + Math.random() * (width - 120);
            const vx = (Math.random() - 0.5) * 0.9;
            const vy = - (6.6 + Math.random() * 2.2);
            rockets.push({ x, y: height + 10, vx, vy, life: 0, maxLife: 900 + Math.random() * 400, color: colors[(Math.random() * colors.length) | 0] });
          }

          function explode(x, y, baseColor) {
            const count = 260 + (Math.random() * 100) | 0; // much more particles per burst
            for (let i = 0; i < count; i++) {
              const angle = Math.random() * Math.PI * 2;
              const speed = 2.0 + Math.random() * 4.2;
              particles.push({
                x, y,
                vx: Math.cos(angle) * speed,
                vy: Math.sin(angle) * speed,
                color: baseColor,
                alpha: 1,
                decay: 0.012 + Math.random() * 0.02,
                size: 2.2 + Math.random() * 2.2,
                sparkle: Math.random() < 0.25
              });
            }
          }

          let start = performance.now();
          let lastSpawn = start - rocketInterval;
          let raf;

          function frame(now) {
            const elapsed = now - start;

            ctx.clearRect(0, 0, width, height);
            ctx.save();
            ctx.globalCompositeOperation = 'lighter';

            // Spawn rockets while within duration
            if (elapsed - lastSpawn >= rocketInterval && elapsed < durationMs) {
              lastSpawn = now;
              // spawn a larger batch each tick
              for (let i = 0; i < 8; i++) spawnRocket();
            }

            // Update rockets
            for (let i = rockets.length - 1; i >= 0; i--) {
              const r = rockets[i];
              r.life += 16;
              r.vy += gravity * 0.2;
              r.vx *= (1 - airDrag);
              r.x += r.vx;
              r.y += r.vy;

              // Draw rocket trail
              ctx.beginPath();
              ctx.fillStyle = r.color;
              ctx.arc(r.x, r.y, 2.2, 0, Math.PI * 2);
              ctx.fill();

              // Explode when slowing down or near apex/timeout
              const shouldExplode = r.vy > -0.4 || r.life > r.maxLife || r.y < height * (0.25 + Math.random() * 0.15);
              if (shouldExplode) {
                explode(r.x, r.y, r.color);
                rockets.splice(i, 1);
              }
            }

            // Update explosion particles
            for (let i = particles.length - 1; i >= 0; i--) {
              const p = particles[i];
              p.vx *= (1 - airDrag);
              p.vy = p.vy + gravity;
              p.x += p.vx;
              p.y += p.vy;
              p.alpha -= p.decay;

              if (p.alpha <= 0) {
                particles.splice(i, 1);
                continue;
              }

              ctx.beginPath();
              ctx.globalAlpha = Math.max(0, Math.min(1, p.alpha));
              ctx.fillStyle = p.color;
              ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
              ctx.fill();

              // occasional sparkle
              if (p.sparkle && Math.random() < 0.1) {
                ctx.beginPath();
                ctx.globalAlpha = Math.max(0, Math.min(1, p.alpha));
                ctx.fillStyle = '#ffffff';
                ctx.arc(p.x, p.y, p.size * 0.7, 0, Math.PI * 2);
                ctx.fill();
              }
            }

            ctx.restore();

            const keepAnimating = elapsed < durationMs || rockets.length > 0 || particles.length > 0;
            if (keepAnimating) {
              raf = requestAnimationFrame(frame);
            } else {
              ctx.clearRect(0, 0, width, height);
              cancelAnimationFrame(raf);
            }
          }

          // Ensure something visible immediately
          // seed with a number of initial rockets quickly
          spawnRocket();
          setTimeout(spawnRocket, 50);
          setTimeout(spawnRocket, 100);
          setTimeout(spawnRocket, 150);
          setTimeout(spawnRocket, 200);
          // several quick visible bursts to kick things off
          for (let i = 0; i < 4; i++) {
            explode(
              width * (0.25 + Math.random() * 0.5),
              height * (0.25 + Math.random() * 0.35),
              colors[(Math.random() * colors.length) | 0]
            );
          }

          cancelAnimationFrame(raf);
          requestAnimationFrame(frame);
        }

        // Anti-fanfare: quick grayscale flash + falling droplets
        function playAntiFanfare(durationMs = 3000, dropCount = 40) {
          const body = document.body;
          body.classList.add('nope');

          const { innerWidth: w } = window;

          function spawnDrops(n) {
            for (let i = 0; i < n; i++) {
              const e = document.createElement('div');
              e.className = 'drop';
              // Grey dot character to ensure a neutral look
              e.textContent = 'â€¢';
              const left = Math.random() * (w - 20);
              const delay = Math.random() * 200; // small stagger inside burst
              const dur = 1100 + Math.random() * 1200; // 1.1sâ€“2.3s
              e.style.left = left + 'px';
              e.style.color = '#9aa3ad';
              e.style.animationDuration = dur + 'ms';
              e.style.animationDelay = delay + 'ms';
              rainLayer.appendChild(e);
              // Clean up each drop after it finishes animation
              setTimeout(() => e.remove(), delay + dur + 150);
            }
          }

          // Keep roughly the same perceived density, spread across duration
          const perBurst = Math.max(6, Math.ceil(dropCount / 3));
          const intervalMs = 500; // spawn twice per second
          const bursts = Math.ceil(durationMs / intervalMs);
          let emitted = 0;
          spawnDrops(perBurst); // immediate first burst
          emitted++;
          const intervalId = setInterval(() => {
            spawnDrops(perBurst);
            emitted++;
            if (emitted >= bursts) {
              clearInterval(intervalId);
            }
          }, intervalMs);

          setTimeout(() => body.classList.remove('nope'), durationMs);
        }

        // Status helper
        function setStatus(text) {
          statusEl.textContent = text;
        }

        // Wire up actions
        agreeBtn.addEventListener('click', () => {
          setStatus('ðŸŽ‡ Agreed â€” launching fireworks!');
          launchFireworks(2000);
        });

        disagreeBtn.addEventListener('click', () => {
          setStatus('ðŸ™ƒ Disagreed â€” noted. Keeping things grounded.');
          playAntiFanfare();
        });

        // Keep canvas crisp on resize
        window.addEventListener('resize', () => fitCanvasToWindow(confettiCanvas));

        // Initial sizing
        fitCanvasToWindow(confettiCanvas);
      })();
    </script>
  </body>
  </html>


